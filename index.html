<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
/* Body의 기본 스타일 설정 */
body {
    margin: 0;
    height: 100vh; /* 전체 뷰포트 높이 */
    overflow: hidden; /* 뷰포트 밖으로 나간 div 숨김 */
    position: relative; /* div의 위치를 상대적으로 설정 */
}

/* 각 div의 기본 스타일 */
div {
    width: 100px; /* div의 너비 */
    height: 100px; /* div의 높이 */
    position: absolute; /* 절대 위치 */
    top: 0; /* 초기 상단 위치 */
}

#name-hongmongi { 
  background-color: red; 
  left: 0;
}
#name-leemingoo { 
  background-color: blue; 
  left: 100px;
}
#name-yunjunhyun { 
  background-color: green; 
  left: 200px;
}
#name-sindonghyun { 
  background-color: yellow; 
  left: 300px;
}
#name-kimhyun { 
  background-color: purple; 
  left: 400px;
}

  </style>
</head>
<body>
  




  <div id="name-hongmongi"></div>
  <div id="name-leemingoo"></div>
  <div id="name-yunjunhyun"></div>
  <div id="name-sindonghyun"></div>
  <div id="name-kimhyun"></div>

  <script>

// 1번 모듈: Div 선택 로직
function selectDivs(callback) {
    const divs = document.querySelectorAll('div');
    divs.forEach(div => {
        div.addEventListener('click', () => {
            divs.forEach(d => d.style.display = 'none'); // 모든 div 숨기기
            callback(); // 콜백 함수 실행
        });
    });
}

// 2번 모듈: 배경 클릭 로직
function backgroundClickToShowDivs() {
    document.body.addEventListener('click', () => {
        // ! divs를 타겟에 맞춰 바꿔야 한다.
        const divs = document.querySelectorAll('div');
        divs.forEach(div => div.style.display = ''); // 모든 div 보이기
    });
}

// 3번 모듈 : 좌우로 헤엄치는 로직 구현
function animateDivs() {
    const divs = document.querySelectorAll('div');
    divs.forEach((div, index) => {
        let horizontalPosition = 100 * index;
        let verticalPosition = 200;
        let wavePhase = Math.random() * 2 * Math.PI;
        let horizontalSpeed = 0.5 + Math.random();
        const waveSpeed = 0.02;
        const waveAmplitude = 100;
        let direction = 1; // 이동 방향 (1: 오른쪽, -1: 왼쪽)

        function animate() {
            // 윈도우 너비 확인
            const windowWidth = window.innerWidth;
            const divWidth = div.offsetWidth;

            // 가로 위치 업데이트 및 경계 확인
            horizontalPosition += horizontalSpeed * direction;
            if (horizontalPosition <= 0 || (horizontalPosition + divWidth) >= windowWidth) {
                direction *= -1; // 방향 전환
            }

            // 물결 움직임 계산
            wavePhase += waveSpeed;
            verticalPosition = 200 + waveAmplitude * Math.sin(wavePhase);

            // div 위치 업데이트
            div.style.left = `${horizontalPosition}px`;
            div.style.top = `${verticalPosition}px`;

            requestAnimationFrame(animate);
        }

        animate();
    });
}

selectDivs(()=>{
  console.log('selectDivs 함수 실행 완료');
  backgroundClickToShowDivs()
});
animateDivs();




  </script>
</body>
</html>